<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drive to Buffalo Itinerary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Custom styles for transitions and appearance */
        body {
            font-family: 'Inter', sans-serif; /* Use Inter font */
            background-color: #f3f4f6; /* Light gray background */
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out; /* Smooth transition for expand/collapse */
            padding-top: 0;
            padding-bottom: 0;
        }
        .details-content.expanded {
            max-height: 1500px; /* Adjust as needed */
            padding-top: 1rem;
            padding-bottom: 1rem;
            transition: max-height 0.5s ease-in, padding 0.5s ease-in;
        }
        .chevron-icon {
            transition: transform 0.3s ease-in-out;
        }
        .expanded .chevron-icon {
            transform: rotate(180deg);
        }
        .itinerary-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .itinerary-card {
             transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        /* Styles for Hike Cards */
        .hike-card {
            border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 0.75rem;
            margin-bottom: 0.75rem; background-color: #ffffff; display: flex; gap: 0.75rem;
        }
        .hike-image { width: 80px; height: 80px; object-fit: cover; border-radius: 0.375rem; flex-shrink: 0; }
        .hike-details { flex-grow: 1; }
        .hike-title { font-weight: 600; color: #1f2937; }
        .hike-stats { font-size: 0.875rem; color: #4b5563; margin-top: 0.25rem; }
        .dog-icon { color: #10b981; }
        .no-dog-icon { color: #ef4444; }
        /* Style for section titles within details */
        .details-section-title {
             font-weight: 600; color: #374151; margin-bottom: 0.5rem; margin-top: 1rem;
             padding-top: 1rem; border-top: 1px solid #e5e7eb;
        }
        .details-section-title:first-child { margin-top: 0; padding-top: 0; border-top: none; }
        /* Style for links in notes */
        .note-link { color: #4f46e5; text-decoration: underline; word-break: break-all; }
        .note-link:hover { color: #4338ca; }
        /* Style for notes & activity list items */
        .list-item { display: flex; align-items: flex-start; margin-bottom: 0.25rem; }
        .list-icon {
            width: 1.25rem; /* w-5 */
            text-align: center;
            margin-right: 0.5rem; /* mr-2 */
            flex-shrink: 0;
            padding-top: 0.125rem; /* Adjust vertical alignment slightly */
            color: #6b7280; /* Default icon color: gray-500 */
        }
        /* Specific Note icon colors */
        .list-icon.note-icon.fa-gas-pump { color: #f59e0b; } /* amber-500 for gas */
        .list-icon.note-icon.fa-charging-station { color: #3b82f6; } /* blue-500 */
        .list-icon.note-icon.fa-link { color: #6366f1; } /* indigo-500 */
        .list-icon.note-icon.fa-car, .list-icon.note-icon.fa-route { color: #1f2937; } /* gray-800 */
        .list-icon.note-icon.fa-book { color: #a855f7; } /* purple-500 */
        .list-icon.note-icon.fa-dog { color: #f59e0b; } /* amber-500 */
        .list-icon.note-icon.fa-house-user { color: #10b981; } /* green-500 */
        .list-icon.note-icon.fa-passport { color: #ef4444; } /* red-500 */
        .list-icon.note-icon.fa-triangle-exclamation { color: #f97316; } /* orange-500 */
        .list-icon.note-icon.fa-circle-info { color: #0ea5e9; } /* sky-500 */
        .list-icon.note-icon.fa-lightbulb { color: #eab308; } /* yellow-500 */
        .list-icon.note-icon.fa-sun { color: #f59e0b; } /* amber-500 */
        .list-icon.note-icon.fa-exclamation-circle { color: #f97316; } /* orange-500 */
        /* Specific Activity icon colors */
        .list-icon.activity-icon.fa-person-hiking { color: #22c55e; } /* green-500 */
        .list-icon.activity-icon.fa-mug-saucer { color: #a16207; } /* yellow-700 */
        .list-icon.activity-icon.fa-car, .list-icon.activity-icon.fa-route, .list-icon.activity-icon.fa-car-side { color: #1f2937; } /* gray-800 */
        .list-icon.activity-icon.fa-umbrella-beach { color: #06b6d4; } /* cyan-500 */
        .list-icon.activity-icon.fa-person-swimming { color: #3b82f6; } /* blue-500 */
        .list-icon.activity-icon.fa-building { color: #78716c; } /* stone-500 */
        .list-icon.activity-icon.fa-flag-checkered { color: #10b981; } /* green-500 */
        .list-icon.activity-icon.fa-bed { color: #8b5cf6; } /* violet-500 */
        .list-icon.activity-icon.fa-question-circle { color: #6b7280; } /* gray-500 */
        .list-icon.activity-icon.fa-map-marker-alt { color: #f43f5e; } /* rose-500 */
        .list-icon.activity-icon.fa-plane-departure { color: #0ea5e9; } /* sky-500 */
        .list-icon.activity-icon.fa-tasks { color: #6b7280; } /* gray-500 */
        .list-icon.activity-icon.fa-utensils { color: #f59e0b; } /* amber-500 */
        .list-icon.activity-icon.fa-wine-glass { color: #a855f7; } /* purple-500 */
        .list-icon.activity-icon.fa-coffee { color: #854d0e; } /* brown-700 */
        .list-icon.activity-icon.fa-person-walking { color: #22c55e; } /* green-500 */
        .list-icon.activity-icon.fa-house-chimney-user { color: #1f2937; } /* gray-800 */
        .list-icon.activity-icon.fa-water { color: #0ea5e9; } /* sky-500 - for Niagara Falls */
        .list-icon.activity-icon.fa-globe-americas { color: #10b981; } /* green-500 - for border crossing */
        .list-icon.activity-icon.fa-camera-retro { color: #ec4899; } /* pink-500 - for viewpoint */
        .list-icon.activity-icon.fa-tree-city { color: #14b8a6; } /* teal-500 - for town visit */
        .list-icon.activity-icon.fa-bread-slice { color: #f59e0b; } /* amber-500 - for snack/bakery */
        .list-icon.activity-icon.fa-beer-mug-empty { color: #a16207; } /* yellow-700 - for brewery */
        .list-icon.activity-icon.fa-mountain-sun { color: #f97316; } /* orange-500 for Galena/Sawtooths */
        .list-icon.activity-icon.fa-fish { color: #3b82f6; } /* blue-500 for lakes */
        .list-icon.activity-icon.fa-gas-pump { color: #f59e0b; } /* amber-500 for gas stop */
        .list-icon.activity-icon.fa-paw { color: #854d0e; } /* brown for dog relief */
        .list-icon.activity-icon.fa-water-lower { color: #3b82f6; } /* for Great Salt Lake */
        /* Sunrise/Sunset & Weather Icons */
        .list-icon.sun-icon.fa-sunrise { color: #f59e0b; } /* amber-500 */
        .list-icon.sun-icon.fa-sunset { color: #f97316; } /* orange-500 */
        .list-icon.weather-icon.fa-sun { color: #facc15; } /* yellow-400 */
        .list-icon.weather-icon.fa-cloud-sun { color: #38bdf8; } /* sky-400 */


        /* Style for charger info - initially hidden */
        .charger-info { display: none; }
        /* Style for the toggle button */
        .toggle-button {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500; /* medium */
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
        }
        .toggle-button:hover { background-color: #4338ca; }
        .toggle-button.active { background-color: #6b7280; }
        .toggle-button.active:hover { background-color: #4b5563; }

        /* Styles for Summary Widget */
        .summary-widget {
            background-color: white;
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem 1.5rem; /* p-4 md:p-6 */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 columns on small screens */
            gap: 1rem; /* gap-4 */
            margin-bottom: 1.5rem; /* mb-6 */
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .summary-widget {
                grid-template-columns: repeat(4, 1fr); /* 4 columns on larger screens */
            }
        }
        .summary-item {
            display: flex;
            align-items: center;
            gap: 0.75rem; /* space-x-3 */
        }
        .summary-icon {
            font-size: 1.5rem; /* text-2xl */
            color: #4f46e5; /* indigo-600 */
            width: 2.5rem; /* w-10, fixed width */
            text-align: center;
        }
        .summary-text .value {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
            display: block; /* Ensure value is on its own line */
        }
        .summary-text .label {
            font-size: 0.875rem; /* text-sm */
            color: #6b7280; /* text-gray-500 */
            display: block; /* Ensure label is on its own line */
        }

    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">Drive to Buffalo Itinerary</h1>

        <div id="summary-widget" class="summary-widget">
            <div class="summary-item">
                <i class="fas fa-road summary-icon"></i>
                <div class="summary-text">
                    <span id="total-miles" class="value">--</span>
                    <span class="label">Miles Driven</span>
                </div>
            </div>
            <div class="summary-item">
                <i class="fas fa-clock summary-icon"></i>
                <div class="summary-text">
                    <span id="total-hours" class="value">--</span>
                    <span class="label">Hours Driven</span>
                </div>
            </div>
            <div class="summary-item">
                <i class="fas fa-calendar-days summary-icon"></i>
                <div class="summary-text">
                    <span id="total-days" class="value">--</span>
                    <span class="label">Total Days</span>
                </div>
            </div>
            <div class="summary-item">
                <i class="fas fa-tasks summary-icon"></i>
                <div class="summary-text">
                    <span id="total-activities" class="value">--</span>
                    <span class="label">Planned Activities</span>
                </div>
            </div>
        </div>

        <div class="text-center mb-6">
            <button id="toggle-charger-button" class="toggle-button">
                <i class="fas fa-charging-station mr-2"></i>Display Charging Info
            </button>
        </div>
        <div id="itinerary-container" class="space-y-4">
            </div>
    </div>

    <script>
        // Structured itinerary data with sunrise/sunset times
        const itineraryData = [
             {
                day: "Wednesday", date: "18/06/2025", startLocation: "Home", destination: "Baker City, OR", driveTime: 5, miles: 310,
                sunrise: "5:20 AM", sunset: "8:51 PM", weather: "Likely Sunny, Warm", weatherIcon: "fas fa-sun",
                notes: [
                    "Target arrival in Baker City by ~8:30 PM (sunset 8:51 PM).",
                    { type: 'charger', text: "Tesla Route (approx): Home --(~20mi)--> Troutdale --(~70mi)--> The Dalles --(~125mi)--> Pendleton --(~100mi)--> Baker City" },
                    "Dog-friendly dinner options in Baker City: Paizano's Pizza (patio), Barley Brown's Brewpub (outdoor)",
                    "Refuel in Baker City upon arrival or in the morning."
                ],
                activities: [
                    "Breakfast at/near Home",
                    "12:00 PM: Depart Home --> Drive to Mosier (~1.5 hrs)",
                    "~1:30 PM - 3:30 PM: Hike Mosier Plateau Trail (~3-3.5 miles, dog-friendly)",
                    "~3:30 PM - 3:45 PM: Drive to Marchesi Vineyard (~15 mins)",
                    "~3:45 PM - 5:00 PM: Late Lunch/Snack at Marchesi Vineyard (Hood River)",
                    "5:00 PM: Depart Marchesi Vineyard --> Drive to Pendleton (~1.5-2 hrs)",
                    "~6:30 PM - 7:15 PM: Pendleton Break (Refuel, Coffee at Sisters Cafe & Dog walk on River Parkway ~2.5 miles)",
                    "7:15 PM: Depart Pendleton --> Drive (~1.5 hr)",
                    "~8:45 PM: Arrive Baker City"
                ]
            },
            {
                day: "Thursday", date: "19/06/2025", startLocation: "Baker City, OR", destination: "Sun Valley, ID", driveTime: 4.5, miles: 280,
                sunrise: "5:55 AM", sunset: "9:18 PM", weather: "Likely Sunny, Pleasant", weatherIcon: "fas fa-sun",
                notes: [
                    "Dog-friendly lunch in Boise Basque Block: Bar Gernika (patio). Check Leku Ona or Basque Market patio policy.",
                    "Good sunset spots in Sun Valley/Ketchum: Galena Summit Overlook (drive), Knob Hill (hike).",
                    "Dog-friendly dinner in Ketchum: Sawtooth Brewery, Grumpy's, Lefty's (check patios). Call ahead!",
                    { type: 'charger', text: "Tesla Route (approx): Baker City --(~130mi)--> Boise --(~130mi)--> Twin Falls --(~85mi)--> Sun Valley (Destination Chargers)" },
                    "Refuel in Sun Valley upon arrival or in the morning."
                ],
                activities: [
                    "Morning: Breakfast in Baker City & Depart for Sun Valley (~9:00 AM)",
                    "Drive Baker City to Boise (~2 hrs)",
                    "~11:00 AM - 1:30 PM: Boise Stop: Lunch in Basque Block & Walk on Boise River Greenbelt",
                    "1:30 PM: Depart Boise --> Drive to Sun Valley (~2.5 hrs)",
                    "~4:00 PM: Arrive Sun Valley, Check-in, Relax",
                    "Evening: Stroll through downtown Ketchum or walk dogs on Wood River Trail. Dinner at a dog-friendly patio."
                ]
            },
            {
                day: "Friday", date: "20/06/2025", startLocation: "Sun Valley, ID", destination: "Ogden, UT", driveTime: 5, miles: 330, // Adjusted miles & time for Ogden
                sunrise: "5:57 AM", sunset: "9:03 PM", weather: "Likely Sunny, Warm", weatherIcon: "fas fa-sun", // Ogden times
                notes: [
                    "This is an EXTREMELY packed day with significant driving. Consider reducing lake visits or shifting some to another day if possible.",
                    "Remember leashes may be required near trailheads/parking areas.",
                    "Dog-friendly dinner Ogden: Slackwater Pizzeria, Ogden Beer Co. (check patios).",
                    { type: 'charger', text: "Tesla Route (approx): Sun Valley --(~85mi)--> Twin Falls --(~120mi)--> Tremonton, UT --(~45mi)--> Ogden" }, // Updated for Ogden
                    "Refuel in Ogden upon arrival or in the morning.",
                    "Break options Galena Lodge to Ogden: Shoshone, Twin Falls (more amenities)."
                ],
                activities: [
                    "~7:30 AM: Depart Sun Valley for Sawtooth Lakes area.",
                    "~8:30 AM - 9:30 AM: Visit Redfish Lake & walk dogs.",
                    "~9:30 AM - 10:00 AM: Drive to Alturas Lake.",
                    "~10:00 AM - 10:45 AM: Visit Alturas Lake.",
                    "~10:45 AM - 11:05 AM: Drive to Pettit Lake.",
                    "~11:05 AM - 11:45 AM: Visit Pettit Lake.",
                    "~11:45 AM - 12:30 PM: Drive to Galena Lodge area.",
                    "~12:30 PM - 2:30 PM: Hike near Galena Lodge (e.g., Galena View Loop or Senate Meadows, ~3 miles, dog-friendly)",
                    "~2:30 PM - 3:30 PM: Lunch at Galena Lodge (dog-friendly deck).",
                    "~3:30 PM: Depart Galena Lodge for Ogden (~4.5-5 hrs drive).",
                    "~8:00 PM - 8:30 PM: Arrive Ogden, check-in.",
                    "Late Evening: Dinner at a dog-friendly patio in Ogden."
                ]
            },
            {
                day: "Saturday", date: "21/06/2025", startLocation: "Ogden, UT", destination: "Steamboat Springs, CO", driveTime: 7, miles: 380, // Adjusted miles & time
                sunrise: "5:37 AM", sunset: "8:43 PM", weather: "Varied: Lake AM, Mtn PM", weatherIcon: "fas fa-cloud-sun", // Steamboat times
                notes: [
                    "Antelope Island: Dogs on leash, not on beaches/Frary Peak. Causeway fee. Bring water!",
                    "Check trail conditions upon arrival in Steamboat.",
                    "Dog-friendly dinner Steamboat: Mountain Tap Brewery, Slopeside Grill (check patios).",
                    { type: 'charger', text: "Tesla Route (approx): Ogden --(~50mi)--> Antelope Island --(~160mi)--> Rawlins, WY --(~110mi)--> Laramie, WY --(~120mi)--> Steamboat Springs" }, // Updated for GSL
                    "Refuel in Steamboat Springs upon arrival or in the morning."
                ],
                activities: [
                    "~8:00 AM: Breakfast in Ogden.",
                    "~9:00 AM: Depart Ogden for Antelope Island State Park (~1 hr drive).",
                    "~10:00 AM - 12:30 PM: Explore Antelope Island (Visitor Center, short trails like Buffalo Point, wildlife viewing).",
                    "~12:30 PM - 1:30 PM: Picnic Lunch near Great Salt Lake or grab quick bite departing.",
                    "~1:30 PM: Depart Antelope Island/Ogden area for Rawlins, WY (~2.5-3 hrs).",
                    "~4:30 PM - 5:00 PM: Refuel & Dog Walk in Rawlins, WY.",
                    "~5:00 PM: Depart Rawlins --> Drive to Steamboat Springs (~3 hrs).",
                    "~8:00 PM: Arrive Steamboat Springs & Settle in. Dinner at a dog-friendly patio."
                ]
            },
            {
                day: "Sunday", date: "22/06/2025", startLocation: "Steamboat Springs, CO", destination: "Omaha, NE", driveTime: 10, miles: 668,
                sunrise: "5:37 AM", sunset: "8:41 PM", weather: "Varied: Mtn AM, Plains PM", weatherIcon: "fas fa-cloud-sun",
                notes: [
                    "Need 2-3 Books, maybe LOTR.",
                    "Find stops every 2-hrs to let the dogs out.",
                    "Omaha arrival will be very late. Dinner/drinks likely for next day.",
                    "Dog-friendly dinner Omaha (next day): Bärchen Beer Garden (patio).",
                    "Dog-friendly Omaha parks (next day): Gene Leahy Mall, Chalco Hills.",
                    { type: 'charger', text: "Tesla Route (approx): Steamboat --(~120mi)--> Laramie, WY --(~140mi)--> Cheyenne, WY --(~100mi)--> North Platte, NE --(~140mi)--> Kearney, NE --(~130mi)--> Lincoln, NE --(~60mi)--> Omaha" },
                    "Refuel in Omaha upon arrival or in the morning."
                ],
                activities: [
                    "~7:30 AM - 8:30 AM: Breakfast/Coffee in Steamboat (e.g., Creekside Cafe or Dusky Grouse Coffee - check patio)",
                    "~8:30 AM - 10:30 AM: Hike Spring Creek Trail (dog-friendly, adjust length as needed)",
                    "~11:00 AM MDT: Depart Steamboat Springs",
                    "~1:00 PM MDT: Arrive Laramie, WY. Lunch at Turtle Rock Coffee & Cafe (patio) & Dog Walk at Laramie River Greenbelt (~1.5 hrs)",
                    "~2:30 PM MDT: Depart Laramie",
                    "~3:30 PM MDT: Arrive Cheyenne, WY. Coffee & Short Dog Walk/Sightsee Capitol Grounds (~1 hr)",
                    "~4:30 PM MDT (5:30 PM CDT): Depart Cheyenne",
                    "~8:00 PM - 9:00 PM CDT: Arrive North Platte, NE. Refuel, Quick Dinner/Stretch & Dog Relief (~1 hr)",
                    "~9:00 PM CDT: Depart North Platte",
                    "~11:00 PM - 11:30 PM CDT: Arrive Kearney, NE. Quick Stretch & Dog Relief (~20-30 mins)",
                    "~11:50 PM CDT: Depart Kearney",
                    "~2:20 AM - 2:50 AM CDT (Mon Jun 23): Arrive in Omaha. Quick dog relief walk near hotel."
                ]
            },
            {
                day: "Monday", date: "23/06/2025", startLocation: "Omaha, NE", destination: "Chicago, IL", driveTime: 7, miles: 468,
                sunrise: "5:16 AM", sunset: "8:29 PM", weather: "Likely Sunny, Humid", weatherIcon: "fas fa-sun",
                notes: [
                    "Stay with Anisha and Nav",
                    { type: 'charger', text: "Tesla Route (approx): Omaha --(~130mi)--> Des Moines, IA --(~115mi)--> Coralville, IA --(~60mi)--> Davenport, IA --(~160mi)--> Chicago Area" },
                    "Refuel in Chicago upon arrival or in the morning."
                ],
                activities: [
                    "Morning: Depart Omaha (~8:00 AM)",
                    "Drive to Des Moines, IA (~2 hrs)",
                    "~10:00 AM - 10:30 AM: Coffee & Dog Walk in Des Moines",
                    "10:30 AM: Drive to Davenport, IA (~2.5 hrs)",
                    "~1:00 PM - 2:00 PM: Lunch & Refuel in Davenport. Dog walk.",
                    "2:00 PM: Depart Davenport --> Drive to Chicago (~2.5 - 3 hrs)",
                    "~4:30 PM - 5:00 PM: Arrive in Chicago"
                ]
            },
            {
                day: "Tuesday", date: "24/06/2025", startLocation: "Chicago, IL", destination: "Chicago, IL", driveTime: 0, miles: 0,
                sunrise: "5:16 AM", sunset: "8:29 PM", weather: "Likely Sunny, Humid", weatherIcon: "fas fa-sun",
                notes: ["Stay with Anisha and Nav"], activities: ["Morning: TBD", "Afternoon: TBD", "Evening: TBD"]
            },
            {
                day: "Wednesday", date: "25/06/2025", startLocation: "Chicago, IL", destination: "Buffalo, NY", driveTime: 8, miles: 533,
                sunrise: "5:38 AM", sunset: "8:58 PM", weather: "Likely Pleasant, Chance of Showers", weatherIcon: "fas fa-cloud-sun",
                notes: [ "Drive via Canada (check border crossing requirements - Passport!)", { type: 'charger', text: "Tesla Route (approx): Chicago --(~150mi)--> Kalamazoo, MI --(~120mi)--> Detroit/Windsor, ON --(~120mi)--> London, ON --(~70mi)--> Woodstock, ON --(~50mi)--> Hamilton, ON --(~70mi)--> Buffalo" }, "Allow ample time for border crossings (~1 hr each way).", "Very long day (~8-9 hrs driving + ~5-6 hrs stops). Call ahead to confirm patio policies." ],
                activities: [ "7:00 AM: Depart Chicago --> Drive (~2.5 hrs)", "~9:30 AM - 10:00 AM: Coffee Stop in Kalamazoo, MI (e.g., Water Street Coffee)", "10:00 AM: Drive Kalamazoo to Detroit/Windsor (~2 hrs)", "~12:00 PM: Arrive Detroit/Windsor border", "~12:00 PM - 1:00 PM: Cross border into Canada (Windsor, ON)", "1:00 PM - 2:00 PM: Lunch at The Bistro at the River (Windsor Riverfront)", "2:00 PM: Drive to London, ON (~1.5 - 2 hrs)", "~3:30 PM - 4:15 PM: Refuel & Dog Walk in London, ON", "4:15 PM: Drive towards Niagara-on-the-Lake (~1.5 hrs)", "~5:45 PM - 6:45 PM: Snack/Stroll in Niagara-on-the-Lake", "~6:45 PM - 7:15 PM: Drive to Niagara Falls", "~7:15 PM - 8:45 PM: Dinner at Niagara Brewing Company (patio) & View Niagara Falls", "~8:45 PM: Depart Niagara Falls --> Drive to Buffalo (~0.5-1 hr + border crossing)", "~10:15 PM - 11:15 PM: Arrive Buffalo" ]
            }
        ];

        const container = document.getElementById('itinerary-container');
        const toggleButton = document.getElementById('toggle-charger-button');
        let chargerInfoVisible = false;

        // Calculate Totals
        let totalMiles = 0;
        let totalHours = 0;
        let totalActivities = 0;
        const totalDays = itineraryData.length;

        itineraryData.forEach(item => {
            totalMiles += item.miles || 0;
            totalHours += item.driveTime || 0;
            if (item.activities) {
                item.activities.forEach(activity => {
                    if (typeof activity === 'string' || (typeof activity === 'object' && activity.type === 'hike')) {
                        totalActivities++;
                    }
                });
            }
        });

        // Update Summary Widget
        document.getElementById('total-miles').textContent = totalMiles.toLocaleString();
        document.getElementById('total-hours').textContent = totalHours.toLocaleString();
        document.getElementById('total-days').textContent = totalDays;
        document.getElementById('total-activities').textContent = totalActivities;


        // Function to create and append itinerary cards
        function displayItinerary() {
            container.innerHTML = ''; // Clear existing cards
            itineraryData.forEach((item, index) => {
                // Create the main card container
                const card = document.createElement('div');
                card.className = 'itinerary-card bg-white rounded-lg shadow-md overflow-hidden cursor-pointer';
                card.setAttribute('role', 'button');
                card.setAttribute('aria-expanded', 'false');
                card.setAttribute('aria-controls', `details-${index}`);
                card.tabIndex = 0;

                // --- Card Header ---
                const header = document.createElement('div');
                header.className = 'p-4 md:p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center';
                const headerLeft = document.createElement('div');
                let locationText = (item.startLocation && item.startLocation !== item.destination)
                    ? `From: <span class="font-medium">${item.startLocation}</span> To: <span class="font-medium">${item.destination}</span>`
                    : `Staying in: <span class="font-medium">${item.destination}</span>`;
                headerLeft.innerHTML = `
                    <h2 class="text-xl md:text-2xl font-semibold text-indigo-700">${item.day}, ${item.date}</h2>
                    <p class="text-lg text-gray-600">${locationText}</p>`;

                const headerRight = document.createElement('div');
                headerRight.className = 'flex flex-wrap justify-start sm:justify-end items-center gap-x-3 gap-y-1 mt-2 sm:mt-0 text-gray-500 text-sm md:text-base w-full sm:w-auto';

                 if (item.sunrise && item.sunset) {
                     headerRight.innerHTML += `
                        <span title="Sunrise" class="whitespace-nowrap"><i class="fas fa-sunrise list-icon sun-icon mr-1"></i>${item.sunrise}</span>
                        <span title="Sunset" class="whitespace-nowrap"><i class="fas fa-sunset list-icon sun-icon mr-1"></i>${item.sunset}</span>
                     `;
                 }
                 if (item.weather && item.weatherIcon) {
                    headerRight.innerHTML += `
                        <span title="Expected Weather" class="whitespace-nowrap"><i class="${item.weatherIcon} list-icon weather-icon mr-1"></i>${item.weather}</span>
                    `;
                 }


                if (item.driveTime > 0 || item.miles > 0) {
                     headerRight.innerHTML += `
                        <span title="Drive Time" class="whitespace-nowrap"><i class="fas fa-clock mr-1"></i> ${item.driveTime} hrs</span>
                        <span title="Distance" class="whitespace-nowrap"><i class="fas fa-road mr-1"></i> ${item.miles} mi</span>
                     `;
                } else {
                     headerRight.innerHTML += `<span title="No driving" class="whitespace-nowrap"><i class="fas fa-bed mr-1"></i> Rest Day</span>`;
                }

                const chevronContainer = document.createElement('div');
                chevronContainer.className = 'ml-auto sm:ml-2';
                const chevronIcon = document.createElement('i');
                chevronIcon.className = 'fas fa-chevron-down chevron-icon text-indigo-500 text-lg';
                chevronContainer.appendChild(chevronIcon);
                headerRight.appendChild(chevronContainer);


                header.appendChild(headerLeft);
                header.appendChild(headerRight);

                // --- Card Details ---
                const details = document.createElement('div');
                details.id = `details-${index}`;
                details.className = 'details-content bg-gray-50 border-t border-gray-200 px-4 md:px-6';

                let detailsHtml = '';
                let hasActivities = false;

                // Handle activities with contextual icons
                if (item.activities && item.activities.length > 0) {
                     let activityListHtml = '';
                     let isFirstActivitySection = true;
                     item.activities.forEach((activity, actIndex) => {
                         if (typeof activity === 'object' && activity.type === 'section') {
                             if (activityListHtml) { detailsHtml += `<ul class="list-none space-y-1 text-gray-600 mb-4">${activityListHtml}</ul>`; activityListHtml = ''; }
                             detailsHtml += `<h3 class="text-md details-section-title ${isFirstActivitySection ? 'pt-4 border-t-0' : ''}">${activity.title}</h3>`; isFirstActivitySection = false;
                         } else if (typeof activity === 'object' && activity.type === 'hike') {
                              if (activityListHtml) { detailsHtml += `<ul class="list-none space-y-1 text-gray-600 mb-4">${activityListHtml}</ul>`; activityListHtml = ''; }
                              detailsHtml += `
                                <div class="hike-card ${actIndex === 0 ? 'mt-4' : ''}">
                                    <img src="${activity.imagePlaceholder}" alt="${activity.name}" class="hike-image" onerror="this.style.display='none'">
                                    <div class="hike-details">
                                        <div class="hike-title">${activity.name}</div>
                                        <div class="hike-stats">
                                            <span><i class="fas fa-person-hiking mr-1"></i> ${activity.distance}</span> | <span><i class="fas fa-mountain mr-1"></i> ${activity.elevationGain}</span> |
                                            <span title="${activity.dogFriendly ? 'Dogs allowed (on leash)' : 'Dogs likely not allowed'}"><i class="fas ${activity.dogFriendly ? 'fa-dog dog-icon' : 'fa-do-not-enter no-dog-icon'} mr-1"></i> ${activity.dogFriendly ? 'Dog Friendly' : 'No Dogs'}</span>
                                        </div>
                                        ${activity.notes ? `<p class="text-xs text-gray-500 mt-1">${activity.notes}</p>` : ''}
                                    </div>
                                </div>`; isFirstActivitySection = false;
                         } else if (typeof activity === 'string') {
                             if (actIndex === 0 && !(typeof item.activities[0] === 'object' && item.activities[0].type === 'section')) {
                                 detailsHtml += `<h3 class="text-md details-section-title pt-4 border-t-0">Activities:</h3>`; isFirstActivitySection = false;
                             }
                             let iconClass = 'fas fa-tasks'; const lowerActivity = activity.toLowerCase();
                             if (lowerActivity.includes('depart home')) { iconClass = 'fas fa-house-chimney-user'; }
                             else if (lowerActivity.includes('depart marchesi') || lowerActivity.includes('depart steamboat') || lowerActivity.includes('depart pendleton') || lowerActivity.includes('depart salt lake') || lowerActivity.includes('depart chicago') || lowerActivity.includes('depart niagara falls') || lowerActivity.includes('depart bistro') || lowerActivity.includes('depart boise') || lowerActivity.includes('depart sawtooths') || lowerActivity.includes('depart laramie') || lowerActivity.includes('depart cheyenne') || lowerActivity.includes('depart north platte') || lowerActivity.includes('depart kearney') || lowerActivity.includes('depart london') || lowerActivity.includes('depart ogden') || lowerActivity.includes('depart antelope island')) { iconClass = 'fas fa-car-side'; }
                             else if (lowerActivity.includes('drive to trail head') || lowerActivity.includes('drive back') || lowerActivity.includes('drive (~') || lowerActivity.includes('drive chicago to') || lowerActivity.includes('drive windsor to') || lowerActivity.includes('drive to buffalo') || lowerActivity.includes('drive towards niagara') || lowerActivity.includes('drive kalamazoo to') || lowerActivity.includes('drive baker city to boise') || lowerActivity.includes('drive boise to sun valley') || lowerActivity.includes('drive galena lodge to redfish') || lowerActivity.includes('drive to alturas lake') || lowerActivity.includes('drive to pettit lake') || lowerActivity.includes('drive to galena lodge') || lowerActivity.includes('drive to marchesi vineyard') || lowerActivity.includes('drive to mosier') || lowerActivity.includes('drive to laramie') || lowerActivity.includes('drive to cheyenne') || lowerActivity.includes('drive to north platte') || lowerActivity.includes('drive to kearney') || lowerActivity.includes('drive to omaha') || lowerActivity.includes('drive to london') || lowerActivity.includes('drive to davenport') || lowerActivity.includes('drive to antelope island') || lowerActivity.includes('drive ogden to rawlins') || lowerActivity.includes('drive to rawlins') || lowerActivity.includes('drive rawlins to steamboat')) { iconClass = 'fas fa-route'; }
                             else if (lowerActivity.includes('hike') || lowerActivity.includes('trail')) { iconClass = 'fas fa-person-hiking'; }
                             else if (lowerActivity.includes('breakfast')) { iconClass = 'fas fa-mug-saucer'; }
                             else if (lowerActivity.includes('lunch')) { iconClass = 'fas fa-utensils'; }
                             else if (lowerActivity.includes('dinner')) { iconClass = 'fas fa-utensils'; }
                             else if (lowerActivity.includes('vineyard')) { iconClass = 'fas fa-wine-glass'; }
                             else if (lowerActivity.includes('visit') || lowerActivity.includes('lodge') || lowerActivity.includes('relax') || lowerActivity.includes('niagara-on-the-lake') || lowerActivity.includes('view niagara falls') || lowerActivity.includes('redfish lake') || lowerActivity.includes('alturas lake') || lowerActivity.includes('pettit lake') || lowerActivity.includes('sightsee') || lowerActivity.includes('explore antelope island')) { iconClass = 'fas fa-map-marker-alt'; }
                             else if (lowerActivity.includes('beach')) { iconClass = 'fas fa-umbrella-beach'; }
                             else if (lowerActivity.includes('swim')) { iconClass = 'fas fa-person-swimming'; }
                             else if (lowerActivity.includes('arrive baker city') || lowerActivity.includes('arrive chicago') || lowerActivity.includes('arrive buffalo') || lowerActivity.includes('arrive pendleton') || lowerActivity.includes('arrive marchesi') || lowerActivity.includes('arrive detroit/windsor') || lowerActivity.includes('arrive niagara falls') || lowerActivity.includes('arrive boise') || lowerActivity.includes('arrive sun valley') || lowerActivity.includes('arrive laramie') || lowerActivity.includes('arrive cheyenne') || lowerActivity.includes('arrive north platte') || lowerActivity.includes('arrive kearney') || lowerActivity.includes('arrive in omaha') || lowerActivity.includes('arrive davenport') || lowerActivity.includes('arrive london') || lowerActivity.includes('arrive ogden') || lowerActivity.includes('arrive steamboat springs')) { iconClass = 'fas fa-flag-checkered'; }
                             else if (lowerActivity.includes('settle in') || lowerActivity.includes('check-in')) { iconClass = 'fas fa-bed'; }
                             else if (lowerActivity.includes('tbd')) { iconClass = 'fas fa-question-circle'; }
                             else if (lowerActivity.includes('coffee') || lowerActivity.includes('cafe')) { iconClass = 'fas fa-coffee'; }
                             else if (lowerActivity.includes('walk') || lowerActivity.includes('riverwalk') || lowerActivity.includes('parkway') || lowerActivity.includes('windsor riverfront') || lowerActivity.includes('stroll') || lowerActivity.includes('greenbelt') || lowerActivity.includes('dog relief')) { iconClass = 'fas fa-person-walking'; }
                             else if (lowerActivity.includes('niagara falls')) { iconClass = 'fas fa-water'; }
                             else if (lowerActivity.includes('cross border')) { iconClass = 'fas fa-globe-americas'; }
                             else if (lowerActivity.includes('snack') || lowerActivity.includes('pastry') || lowerActivity.includes('quick bite')) { iconClass = 'fas fa-bread-slice'; }
                             else if (lowerActivity.includes('brewery')) { iconClass = 'fas fa-beer-mug-empty'; }
                             else if (lowerActivity.includes('refuel')) { iconClass = 'fas fa-gas-pump'; }
                             else if (lowerActivity.includes('great salt lake')) { iconClass = 'fas fa-water-lower';}


                             activityListHtml += `<li class="list-item"><i class="${iconClass} list-icon activity-icon"></i><span class="flex-1">${activity}</span></li>`;
                         }
                     });
                     if (activityListHtml) {
                         if (isFirstActivitySection) { detailsHtml += `<h3 class="text-md details-section-title pt-4 border-t-0">Activities:</h3>`; }
                         detailsHtml += `<ul class="list-none space-y-1 text-gray-600">${activityListHtml}</ul>`;
                     }
                     hasActivities = true;
                }

                // Handle Notes with contextual icons
                if (item.notes && item.notes.length > 0) {
                    detailsHtml += `<h3 class="text-md details-section-title ${!hasActivities ? 'pt-4 border-t-0' : ''}">Notes:</h3>`;
                    detailsHtml += `<ul class="list-none space-y-1 text-gray-600">`;
                    item.notes.forEach(note => {
                        const noteText = (typeof note === 'object' && note.type === 'charger') ? note.text : note;
                        const isChargerNote = (typeof note === 'object' && note.type === 'charger');
                        const isLink = typeof noteText === 'string' && (noteText.startsWith('http://') || noteText.startsWith('https://'));
                        let iconClass = 'fas fa-circle-info'; let liClass = 'list-item';
                        if (isChargerNote) { iconClass = 'fas fa-charging-station'; liClass += ' charger-info'; }
                        else if (isLink) { iconClass = 'fas fa-link'; }
                        else if (typeof noteText === 'string') {
                            const lowerNote = noteText.toLowerCase();
                            if (lowerNote.includes('sunset')) { iconClass = 'fas fa-sun'; }
                            else if (lowerNote.includes('drive to') || lowerNote.includes('depart')) { iconClass = 'fas fa-route'; }
                            else if (lowerNote.includes('book') || lowerNote.includes('lotr')) { iconClass = 'fas fa-book'; }
                            else if (lowerNote.includes('dog') || lowerNote.includes('leash') || lowerNote.includes('dog-friendly')) { iconClass = 'fas fa-dog'; }
                            else if (lowerNote.includes('stay with')) { iconClass = 'fas fa-house-user'; }
                            else if (lowerNote.includes('canada') || lowerNote.includes('border crossing')) { iconClass = 'fas fa-passport'; }
                            else if (lowerNote.includes('trail condition')) { iconClass = 'fas fa-triangle-exclamation'; }
                            else if (lowerNote.includes('find activity') || lowerNote.includes('remember')) { iconClass = 'fas fa-lightbulb'; }
                            else if (lowerNote.includes('long day') || lowerNote.includes('long driving day') || lowerNote.includes('packed day')) { iconClass = 'fas fa-exclamation-circle'; }
                            else if (lowerNote.includes('refuel')) { iconClass = 'fas fa-gas-pump'; }
                        }
                        const displayStyle = isChargerNote && !chargerInfoVisible ? 'style="display: none;"' : '';
                        detailsHtml += `<li class="${liClass}" ${displayStyle}><i class="${iconClass} list-icon note-icon"></i><span class="flex-1">`;
                        if (isLink) { detailsHtml += `<a href="${noteText}" target="_blank" rel="noopener noreferrer" class="note-link">${noteText}</a>`; }
                        else { detailsHtml += noteText; }
                        detailsHtml += `</span></li>`;
                    });
                    detailsHtml += '</ul>';
                }

                if (detailsHtml) { details.innerHTML = detailsHtml + '<div class="pb-4"></div>'; }
                else { details.innerHTML = '<p class="text-gray-500 py-4">No additional details for this day.</p>'; }

                card.appendChild(header);
                card.appendChild(details);
                container.appendChild(card);

                // Card Expand/Collapse Listener
                const toggleDetails = () => { details.classList.toggle('expanded'); card.setAttribute('aria-expanded', details.classList.contains('expanded')); };
                card.addEventListener('click', toggleDetails);
                card.addEventListener('keypress', (event) => { if (event.key === 'Enter' || event.key === ' ') { event.preventDefault(); toggleDetails(); } });
            });
        }

        // Toggle Button Listener
        toggleButton.addEventListener('click', () => {
            chargerInfoVisible = !chargerInfoVisible;
            const chargerItems = document.querySelectorAll('.charger-info');
            chargerItems.forEach(item => { item.style.display = chargerInfoVisible ? 'flex' : 'none'; });
            if (chargerInfoVisible) { toggleButton.innerHTML = '<i class="fas fa-charging-station mr-2"></i>Hide Charging Info'; toggleButton.classList.add('active'); }
            else { toggleButton.innerHTML = '<i class="fas fa-charging-station mr-2"></i>Display Charging Info'; toggleButton.classList.remove('active'); }
        });

        // Initial display
        displayItinerary();

    </script>
</body>
</html>
