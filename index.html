<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drive to Buffalo Itinerary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Custom styles for transitions and appearance */
        body {
            font-family: 'Inter', sans-serif; /* Use Inter font */
            background-color: #f3f4f6; /* Light gray background */
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out; /* Smooth transition for expand/collapse */
            padding-top: 0;
            padding-bottom: 0;
        }
        .details-content.expanded {
            /* Adjusted max-height now that map is removed */
            max-height: 1500px; /* Adjust as needed, depends on content length */
            padding-top: 1rem; /* Add padding when expanded */
            padding-bottom: 1rem;
            transition: max-height 0.5s ease-in, padding 0.5s ease-in;
        }
        /* Style for the chevron icon rotation */
        .chevron-icon {
            transition: transform 0.3s ease-in-out;
        }
        .expanded .chevron-icon {
            transform: rotate(180deg);
        }
        /* Add a subtle hover effect */
        .itinerary-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .itinerary-card {
             transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        /* Styles for Hike Cards */
        .hike-card {
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 0.75rem; /* p-3 */
            margin-bottom: 0.75rem; /* mb-3 */
            background-color: #ffffff; /* bg-white */
            display: flex;
            gap: 0.75rem; /* space-x-3 replacement */
        }
        .hike-image {
            width: 80px; /* Fixed width for image */
            height: 80px;
            object-fit: cover;
            border-radius: 0.375rem; /* rounded-md */
            flex-shrink: 0; /* Prevent image from shrinking */
        }
        .hike-details {
            flex-grow: 1; /* Allow details to take remaining space */
        }
        .hike-title {
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
        }
        .hike-stats {
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* text-gray-600 */
            margin-top: 0.25rem; /* mt-1 */
        }
        .dog-icon {
             color: #10b981; /* text-green-500 */
        }
        .no-dog-icon {
             color: #ef4444; /* text-red-500 */
        }
        /* Style for section titles within details */
        .details-section-title {
             font-weight: 600; /* font-semibold */
             color: #374151; /* text-gray-700 */
             margin-bottom: 0.5rem; /* mb-2 */
             margin-top: 1rem; /* mt-4 */
             padding-top: 1rem; /* pt-4 */
             border-top: 1px solid #e5e7eb; /* border-t border-gray-200 */
        }
        .details-section-title:first-child {
             margin-top: 0;
             padding-top: 0;
             border-top: none;
        }
        /* Style for links in notes */
        .note-link {
             color: #4f46e5; /* text-indigo-600 */
             text-decoration: underline;
             word-break: break-all; /* Prevent long links from overflowing */
        }
        .note-link:hover {
             color: #4338ca; /* text-indigo-800 */
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-8">Drive to Buffalo Itinerary</h1>
        <div id="itinerary-container" class="space-y-4">
            </div>
    </div>

    <script>
        // Structured itinerary data
        const itineraryData = [
             {
                day: "Wednesday",
                date: "18/06/2025",
                startLocation: "Home",
                destination: "Baker City, OR",
                driveTime: 5,
                miles: 310,
                notes: ["Drive to Baker City after 12 PM"],
                activities: []
            },
            {
                day: "Thursday",
                date: "19/06/2025",
                startLocation: "Baker City, OR",
                destination: "Sun Valley, ID",
                driveTime: 4.5,
                miles: 280,
                notes: ["Find activity on drive.", "Boise is 3hrs away."],
                activities: [
                    "7AM - 8AM: Breakfast",
                    "8AM - 8:30AM: Drive to trail head (30 mins drive from Baker City)",
                    "8:30AM - 1PM: Hike Rock Creek Trail (7 miles, 2200ft, 4hrs)",
                    "1PM - 6PM: Drive back to Sun Valley, ID"
                ]
            },
            {
                day: "Friday",
                date: "20/06/2025",
                startLocation: "Sun Valley, ID",
                destination: "Salt Lake City, UT",
                driveTime: 4.5,
                miles: 295,
                // **MODIFIED**: Added source link to notes
                notes: [
                    "Remember leashes may be required near trailheads/parking areas.",
                    "Dog-friendly info source: https://visitsunvalley.com/things-to-do/dog-friendly/"
                ],
                activities: [
                    "Hike a dog-friendly trail (all trails welcome dogs)",
                    "Visit a dog beach at Redfish, Alturas, or Pettit Lake",
                    "Let dogs swim in Hulen Pond or Big Wood River (off bike path)",
                    "Relax at dog-friendly Galena Lodge after activities"
                 ]
            },
            {
                day: "Saturday",
                date: "21/06/2025",
                startLocation: "Salt Lake City, UT",
                destination: "Steamboat Springs, CO",
                driveTime: 6,
                miles: 333,
                notes: ["Check trail conditions upon arrival in Steamboat."],
                activities: [
                    "Morning: Depart Salt Lake City",
                    "Afternoon/Evening: Drive to Steamboat Springs & Settle in"
                 ]
            },
            {
                day: "Sunday",
                date: "22/06/2025",
                startLocation: "Steamboat Springs, CO",
                destination: "Omaha, NE",
                driveTime: 10,
                miles: 668,
                notes: ["Need 2-3 Books, maybe LOTR.", "Find stops every 2-hrs to let the dogs out."],
                activities: [
                    { type: 'section', title: 'Morning Hike Options:'}, // Section title
                    {
                        type: 'hike',
                        name: 'Fish Creek Falls Trail (Lower Overlook)',
                        distance: '0.5 miles RT',
                        elevationGain: '~160 ft',
                        imagePlaceholder: 'https://placehold.co/80x80/a7f3d0/1f2937?text=Falls',
                        dogFriendly: true,
                        notes: 'Paved, accessible trail to main overlook.'
                    },
                    {
                        type: 'hike',
                        name: 'Emerald Mountain Quarry Trail',
                        distance: '~4 miles RT',
                        elevationGain: '~950 ft',
                        imagePlaceholder: 'https://placehold.co/80x80/bae6fd/1f2937?text=View',
                        dogFriendly: true,
                        notes: 'Great views of town and the ski area.'
                    },
                     {
                        type: 'hike',
                        name: 'Spring Creek Trail',
                        distance: 'Variable (up to 5+ miles one way)',
                        elevationGain: 'Minimal/Gradual',
                        imagePlaceholder: 'https://placehold.co/80x80/fecaca/1f2937?text=Creek',
                        dogFriendly: true,
                        notes: 'Easy, mostly flat trail starting near town.'
                    },
                    { type: 'section', title: 'Afternoon/Evening:'}, // Section title
                    "Depart Steamboat & Drive to Omaha" // Drive after hiking
                ]
            },
            {
                day: "Monday",
                date: "23/06/2025",
                startLocation: "Omaha, NE",
                destination: "Chicago, IL",
                driveTime: 7,
                miles: 468,
                notes: ["Stay with Anisha and Nav"],
                activities: ["Morning: Driving", "Afternoon: Arrive in Chicago", "Evening: TBD"]
            },
            {
                day: "Tuesday",
                date: "24/06/2025",
                startLocation: "Chicago, IL",
                destination: "Chicago, IL",
                driveTime: 0,
                miles: 0,
                notes: ["Stay with Anisha and Nav"],
                activities: ["Morning: TBD", "Afternoon: TBD", "Evening: TBD"]
            },
            {
                day: "Wednesday",
                date: "25/06/2025",
                startLocation: "Chicago, IL",
                destination: "Buffalo, NY",
                driveTime: 8,
                miles: 533,
                notes: ["Drive via Canada"],
                activities: ["Morning: Driving", "Afternoon: Arrive in Buffalo", "Evening: TBD"]
            }
        ];

        const container = document.getElementById('itinerary-container');

        // Function to create and append itinerary cards
        function displayItinerary() {
            itineraryData.forEach((item, index) => {
                // Create the main card container
                const card = document.createElement('div');
                card.className = 'itinerary-card bg-white rounded-lg shadow-md overflow-hidden cursor-pointer';
                card.setAttribute('role', 'button');
                card.setAttribute('aria-expanded', 'false');
                card.setAttribute('aria-controls', `details-${index}`);
                card.tabIndex = 0;

                // --- Card Header (Always Visible) ---
                const header = document.createElement('div');
                header.className = 'p-4 md:p-6 flex justify-between items-center';
                 // Left side: Day, Date, Start & Destination
                const headerLeft = document.createElement('div');
                let locationText = '';
                if (item.startLocation && item.startLocation !== item.destination) {
                     locationText = `From: <span class="font-medium">${item.startLocation}</span> To: <span class="font-medium">${item.destination}</span>`;
                } else {
                     locationText = `Staying in: <span class="font-medium">${item.destination}</span>`;
                }
                headerLeft.innerHTML = `
                    <h2 class="text-xl md:text-2xl font-semibold text-indigo-700">${item.day}, ${item.date}</h2>
                    <p class="text-lg text-gray-600">${locationText}</p>
                `;

                // Right side: Drive Time, Miles, Expand Icon
                const headerRight = document.createElement('div');
                headerRight.className = 'flex items-center space-x-4 text-gray-500 text-sm md:text-base';
                if (item.driveTime > 0 || item.miles > 0) {
                     headerRight.innerHTML += `
                        <span title="Drive Time"><i class="fas fa-clock mr-1"></i> ${item.driveTime} hrs</span>
                        <span title="Distance"><i class="fas fa-road mr-1"></i> ${item.miles} mi</span>
                    `;
                } else {
                     headerRight.innerHTML += `
                        <span title="No driving"><i class="fas fa-bed mr-1"></i> Rest Day</span>
                    `;
                }
                const chevronIcon = document.createElement('i');
                chevronIcon.className = 'fas fa-chevron-down chevron-icon ml-2 text-indigo-500';
                headerRight.appendChild(chevronIcon);

                header.appendChild(headerLeft);
                header.appendChild(headerRight);


                // --- Card Details (Expandable) ---
                const details = document.createElement('div');
                details.id = `details-${index}`;
                details.className = 'details-content bg-gray-50 border-t border-gray-200 px-4 md:px-6';

                let detailsHtml = '';
                let hasActivities = false; // Flag to check if any activities exist

                // Handle activities (strings, hikes, sections)
                if (item.activities && item.activities.length > 0) {
                     let currentListHtml = ''; // Accumulate list items
                     let isFirstSection = true; // Track if it's the first section title

                     item.activities.forEach((activity, actIndex) => {
                         // Check for Section Title Object
                         if (typeof activity === 'object' && activity.type === 'section') {
                             if (currentListHtml) {
                                 detailsHtml += `<ul class="list-disc list-inside space-y-1 text-gray-600 mb-4">${currentListHtml}</ul>`;
                                 currentListHtml = '';
                             }
                             detailsHtml += `<h3 class="text-md details-section-title ${isFirstSection ? 'pt-4 border-t-0' : ''}">${activity.title}</h3>`;
                             isFirstSection = false;
                         }
                         // Check for Hike Object
                         else if (typeof activity === 'object' && activity.type === 'hike') {
                              if (currentListHtml) {
                                 detailsHtml += `<ul class="list-disc list-inside space-y-1 text-gray-600 mb-4">${currentListHtml}</ul>`;
                                 currentListHtml = '';
                             }
                             detailsHtml += `
                                <div class="hike-card ${actIndex === 0 ? 'mt-4' : ''}">
                                    <img src="${activity.imagePlaceholder}" alt="${activity.name}" class="hike-image" onerror="this.style.display='none'">
                                    <div class="hike-details">
                                        <div class="hike-title">${activity.name}</div>
                                        <div class="hike-stats">
                                            <span><i class="fas fa-person-hiking mr-1"></i> ${activity.distance}</span> |
                                            <span><i class="fas fa-mountain mr-1"></i> ${activity.elevationGain}</span> |
                                            <span title="${activity.dogFriendly ? 'Dogs allowed (on leash)' : 'Dogs likely not allowed'}">
                                                <i class="fas ${activity.dogFriendly ? 'fa-dog dog-icon' : 'fa-do-not-enter no-dog-icon'} mr-1"></i>
                                                ${activity.dogFriendly ? 'Dog Friendly' : 'No Dogs'}
                                            </span>
                                        </div>
                                        ${activity.notes ? `<p class="text-xs text-gray-500 mt-1">${activity.notes}</p>` : ''}
                                    </div>
                                </div>
                            `;
                             isFirstSection = false;
                         }
                         // Handle regular string activities
                         else if (typeof activity === 'string') {
                             if (actIndex === 0 && !(typeof item.activities[0] === 'object' && item.activities[0].type === 'section')) {
                                 detailsHtml += `<h3 class="text-md details-section-title pt-4 border-t-0">Activities:</h3>`;
                                 isFirstSection = false;
                             }
                             currentListHtml += `<li>${activity}</li>`;
                         }
                     });

                     if (currentListHtml) {
                         if (isFirstSection) {
                             detailsHtml += `<h3 class="text-md details-section-title pt-4 border-t-0">Activities:</h3>`;
                         }
                         detailsHtml += `<ul class="list-disc list-inside space-y-1 text-gray-600">${currentListHtml}</ul>`;
                     }
                     hasActivities = true;
                }


                // Add Notes section
                if (item.notes && item.notes.length > 0) {
                    detailsHtml += `<h3 class="text-md details-section-title ${!hasActivities ? 'pt-4 border-t-0' : ''}">Notes:</h3>`;
                    detailsHtml += `<ul class="list-disc list-inside space-y-1 text-gray-600">`;
                    // **MODIFIED**: Check for links in notes and make them clickable
                    item.notes.forEach(note => {
                        // Basic check if the note looks like a URL
                        if (note.startsWith('http://') || note.startsWith('https://')) {
                            detailsHtml += `<li><a href="${note}" target="_blank" rel="noopener noreferrer" class="note-link">${note}</a></li>`;
                        } else {
                            detailsHtml += `<li>${note}</li>`;
                        }
                    });
                    detailsHtml += '</ul>';
                }

                // Add padding bottom if there's content
                if (detailsHtml) {
                    details.innerHTML = detailsHtml + '<div class="pb-4"></div>';
                } else {
                     details.innerHTML = '<p class="text-gray-500 py-4">No additional details for this day.</p>';
                }

                // Append header and details to the card
                card.appendChild(header);
                card.appendChild(details);

                // Append the card to the container
                container.appendChild(card);

                // --- Event Listener for Expand/Collapse ---
                const toggleDetails = () => {
                    const isExpanded = details.classList.toggle('expanded');
                    card.setAttribute('aria-expanded', isExpanded);
                };

                // Add click listener to the entire card
                card.addEventListener('click', toggleDetails);
                // Add keypress listener (Enter/Space) for accessibility
                 card.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        toggleDetails();
                    }
                 });
            });
        }

        // Initial display of the itinerary
        displayItinerary();

    </script>
</body>
</html>
